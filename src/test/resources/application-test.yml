# ========================================
# 測試環境設定
# ========================================

spring:
  application:
    name: booking-platform-test

  # ========================================
  # 排除 Redis 自動配置（測試環境）
  # ========================================
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration

  # ========================================
  # 使用 H2 記憶體資料庫
  # ========================================
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:
    driver-class-name: org.h2.Driver

  # ========================================
  # JPA 設定
  # ========================================
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
    open-in-view: false

  # ========================================
  # 停用 Redis（測試環境）
  # ========================================
  data:
    redis:
      host: localhost
      port: 6379

  # ========================================
  # Jackson 設定
  # ========================================
  jackson:
    time-zone: Asia/Taipei
    date-format: yyyy-MM-dd HH:mm:ss
    serialization:
      write-dates-as-timestamps: false

# ========================================
# JWT 設定
# ========================================
jwt:
  secret: test-jwt-secret-key-must-be-at-least-256-bits-long-for-hs256-algorithm
  expiration: 3600000
  refresh-expiration: 86400000

# ========================================
# LINE Bot 設定（測試用）
# ========================================
line:
  bot:
    channel-token: test-channel-token
    channel-secret: test-channel-secret
    api-endpoint: https://api.line.me
    webhook-verify-enabled: false
  conversation:
    ttl: 1800
    key-prefix: "test:line:conversation:"

# ========================================
# 加密設定
# ========================================
encryption:
  secret-key: dGVzdC1lbmNyeXB0aW9uLWtleS0zMi1ieXRlcw==

# ========================================
# 日誌設定
# ========================================
logging:
  level:
    root: WARN
    com.booking.platform: DEBUG
    org.springframework.security: WARN
